<!DOCTYPE html><html><head><script type="text/javascript">
(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(d){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})()
</script><script type="text/javascript">var KX_timer = new window.jstiming.Timer(); KX_timer.name = 'published';</script><title>Go Slice with Cap</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon6.ico"><style type="text/css">
      body {
        font-family: arial, sans, sans-serif;
        margin: 0;
      }

      iframe {
        border: 0;
        frameborder: 0;
        height: 100%;
        width: 100%;
      }

      #header, #footer {
        background: #f0f0f0;
        padding: 10px 10px;
      }

      #header {
        border-bottom: 1px #ccc solid;
      }

      #footer {
        border-top: 1px #ccc solid;
        border-bottom: 1px #ccc solid;
        font-size: 13;
      }

      #contents {
        margin: 6px;
      }

      .dash {
        padding: 0 6px;
      }
    </style></head><body><div id="header">Go Slice with Cap</div><div id="contents"><style type="text/css">ul.lst-kix_buf82lhly8og-1{list-style-type:none}ul.lst-kix_buf82lhly8og-2{list-style-type:none}.lst-kix_buf82lhly8og-0>li:before{content:"\0025cf  "}ul.lst-kix_buf82lhly8og-0{list-style-type:none}ul.lst-kix_buf82lhly8og-5{list-style-type:none}ul.lst-kix_buf82lhly8og-6{list-style-type:none}ul.lst-kix_buf82lhly8og-3{list-style-type:none}ul.lst-kix_buf82lhly8og-4{list-style-type:none}.lst-kix_jpviufoinhnt-0>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-0,decimal) ". "}ol.lst-kix_jpviufoinhnt-5.start{counter-reset:lst-ctn-kix_jpviufoinhnt-5 0}ol.lst-kix_j0wn3u4pn8au-5.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-5 0}.lst-kix_j0wn3u4pn8au-1>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-1}.lst-kix_jpviufoinhnt-7>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-7,lower-latin) ". "}.lst-kix_j0wn3u4pn8au-4>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-4,lower-latin) ". "}ol.lst-kix_jpviufoinhnt-2.start{counter-reset:lst-ctn-kix_jpviufoinhnt-2 0}.lst-kix_j0wn3u4pn8au-6>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-6}ol.lst-kix_jpviufoinhnt-0.start{counter-reset:lst-ctn-kix_jpviufoinhnt-0 0}.lst-kix_j0wn3u4pn8au-0>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-0,decimal) ". "}ol.lst-kix_jpviufoinhnt-6.start{counter-reset:lst-ctn-kix_jpviufoinhnt-6 0}ol.lst-kix_j0wn3u4pn8au-0.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-0 0}.lst-kix_jpviufoinhnt-8>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-8,lower-roman) ". "}.lst-kix_j0wn3u4pn8au-5>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-5,lower-roman) ". "}ol.lst-kix_jpviufoinhnt-8.start{counter-reset:lst-ctn-kix_jpviufoinhnt-8 0}ol.lst-kix_j0wn3u4pn8au-3.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-3 0}.lst-kix_j0wn3u4pn8au-2>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-2,lower-roman) ". "}ol.lst-kix_jpviufoinhnt-3{list-style-type:none}ol.lst-kix_jpviufoinhnt-4{list-style-type:none}.lst-kix_nv0szp7jppz7-1>li:before{content:"\0025cb  "}.lst-kix_j0wn3u4pn8au-4>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-4}ol.lst-kix_jpviufoinhnt-5{list-style-type:none}.lst-kix_buf82lhly8og-2>li:before{content:"\0025a0  "}ol.lst-kix_jpviufoinhnt-6{list-style-type:none}ol.lst-kix_jpviufoinhnt-7{list-style-type:none}ol.lst-kix_jpviufoinhnt-8{list-style-type:none}.lst-kix_j0wn3u4pn8au-0>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-0}.lst-kix_nv0szp7jppz7-2>li:before{content:"\0025a0  "}.lst-kix_jpviufoinhnt-7>li{counter-increment:lst-ctn-kix_jpviufoinhnt-7}.lst-kix_j0wn3u4pn8au-2>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-2}ol.lst-kix_jpviufoinhnt-3.start{counter-reset:lst-ctn-kix_jpviufoinhnt-3 0}.lst-kix_buf82lhly8og-8>li:before{content:"\0025a0  "}ol.lst-kix_jpviufoinhnt-7.start{counter-reset:lst-ctn-kix_jpviufoinhnt-7 0}.lst-kix_j0wn3u4pn8au-3>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-3,decimal) ". "}.lst-kix_jpviufoinhnt-2>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-2,lower-roman) ". "}.lst-kix_jpviufoinhnt-6>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-6,decimal) ". "}.lst-kix_jpviufoinhnt-1>li{counter-increment:lst-ctn-kix_jpviufoinhnt-1}.lst-kix_jpviufoinhnt-0>li{counter-increment:lst-ctn-kix_jpviufoinhnt-0}.lst-kix_j0wn3u4pn8au-7>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-7,lower-latin) ". "}.lst-kix_buf82lhly8og-5>li:before{content:"\0025a0  "}.lst-kix_nv0szp7jppz7-5>li:before{content:"\0025a0  "}ol.lst-kix_j0wn3u4pn8au-1.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-1 0}ol.lst-kix_jpviufoinhnt-1.start{counter-reset:lst-ctn-kix_jpviufoinhnt-1 0}ol.lst-kix_jpviufoinhnt-4.start{counter-reset:lst-ctn-kix_jpviufoinhnt-4 0}.lst-kix_buf82lhly8og-4>li:before{content:"\0025cb  "}.lst-kix_jpviufoinhnt-1>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-1,lower-latin) ". "}.lst-kix_jpviufoinhnt-4>li{counter-increment:lst-ctn-kix_jpviufoinhnt-4}.lst-kix_jpviufoinhnt-3>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-3,decimal) ". "}.lst-kix_j0wn3u4pn8au-6>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-6,decimal) ". "}ol.lst-kix_j0wn3u4pn8au-7.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-7 0}.lst-kix_j0wn3u4pn8au-8>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-8,lower-roman) ". "}.lst-kix_jpviufoinhnt-3>li{counter-increment:lst-ctn-kix_jpviufoinhnt-3}.lst-kix_jpviufoinhnt-4>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-4,lower-latin) ". "}.lst-kix_nv0szp7jppz7-0>li:before{content:"\0025cf  "}.lst-kix_nv0szp7jppz7-6>li:before{content:"\0025cf  "}ol.lst-kix_jpviufoinhnt-0{list-style-type:none}ol.lst-kix_jpviufoinhnt-1{list-style-type:none}ol.lst-kix_jpviufoinhnt-2{list-style-type:none}ul.lst-kix_nv0szp7jppz7-8{list-style-type:none}.lst-kix_nv0szp7jppz7-7>li:before{content:"\0025cb  "}ol.lst-kix_j0wn3u4pn8au-4.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-4 0}ul.lst-kix_nv0szp7jppz7-5{list-style-type:none}ul.lst-kix_nv0szp7jppz7-4{list-style-type:none}ul.lst-kix_nv0szp7jppz7-7{list-style-type:none}ul.lst-kix_nv0szp7jppz7-6{list-style-type:none}ul.lst-kix_nv0szp7jppz7-1{list-style-type:none}ul.lst-kix_nv0szp7jppz7-0{list-style-type:none}ul.lst-kix_nv0szp7jppz7-3{list-style-type:none}ul.lst-kix_nv0szp7jppz7-2{list-style-type:none}.lst-kix_jpviufoinhnt-8>li{counter-increment:lst-ctn-kix_jpviufoinhnt-8}.lst-kix_j0wn3u4pn8au-3>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-3}.lst-kix_buf82lhly8og-7>li:before{content:"\0025cb  "}.lst-kix_j0wn3u4pn8au-8>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-8}.lst-kix_jpviufoinhnt-2>li{counter-increment:lst-ctn-kix_jpviufoinhnt-2}.lst-kix_nv0szp7jppz7-3>li:before{content:"\0025cf  "}.lst-kix_buf82lhly8og-6>li:before{content:"\0025cf  "}.lst-kix_j0wn3u4pn8au-1>li:before{content:"" counter(lst-ctn-kix_j0wn3u4pn8au-1,lower-latin) ". "}.lst-kix_jpviufoinhnt-5>li:before{content:"" counter(lst-ctn-kix_jpviufoinhnt-5,lower-roman) ". "}.lst-kix_jpviufoinhnt-5>li{counter-increment:lst-ctn-kix_jpviufoinhnt-5}.lst-kix_nv0szp7jppz7-4>li:before{content:"\0025cb  "}ol.lst-kix_j0wn3u4pn8au-2.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-2 0}.lst-kix_j0wn3u4pn8au-5>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-5}.lst-kix_jpviufoinhnt-6>li{counter-increment:lst-ctn-kix_jpviufoinhnt-6}.lst-kix_nv0szp7jppz7-8>li:before{content:"\0025a0  "}ol.lst-kix_j0wn3u4pn8au-7{list-style-type:none}ol.lst-kix_j0wn3u4pn8au-6{list-style-type:none}.lst-kix_buf82lhly8og-1>li:before{content:"\0025cb  "}ol.lst-kix_j0wn3u4pn8au-8{list-style-type:none}ul.lst-kix_buf82lhly8og-7{list-style-type:none}ul.lst-kix_buf82lhly8og-8{list-style-type:none}ol.lst-kix_j0wn3u4pn8au-6.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-6 0}ol.lst-kix_j0wn3u4pn8au-8.start{counter-reset:lst-ctn-kix_j0wn3u4pn8au-8 0}ol.lst-kix_j0wn3u4pn8au-1{list-style-type:none}ol.lst-kix_j0wn3u4pn8au-0{list-style-type:none}ol.lst-kix_j0wn3u4pn8au-3{list-style-type:none}ol.lst-kix_j0wn3u4pn8au-2{list-style-type:none}.lst-kix_j0wn3u4pn8au-7>li{counter-increment:lst-ctn-kix_j0wn3u4pn8au-7}ol.lst-kix_j0wn3u4pn8au-5{list-style-type:none}.lst-kix_buf82lhly8og-3>li:before{content:"\0025cf  "}ol.lst-kix_j0wn3u4pn8au-4{list-style-type:none}ol{margin:0;padding:0}.c7{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c0{text-indent:36pt;direction:ltr}.c10{color:#1155cc;text-decoration:underline}.c9{color:inherit;text-decoration:inherit}.c2{height:11pt;text-align:left}.c6{font-style:italic}.c3{height:11pt}.c8{text-align:center}.c1{direction:ltr}.c5{text-align:left}.c4{font-weight:bold}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:11pt;font-family:"Arial";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:11pt;font-family:"Arial";padding-bottom:0pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";padding-bottom:0pt}h2{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";padding-bottom:0pt}h3{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";padding-bottom:0pt}h4{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:0pt}h5{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";padding-bottom:0pt}h6{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:0pt}</style><p class="c1 c8"><span class="c4">Go </span><span class="c4">Slice with Cap</span></p><p class="c3 c1"><span></span></p><p class="c8 c1"><span>Russ Cox</span></p><p class="c8 c1"><span>June 2013</span></p><p class="c2 c1"><span></span></p><p class="c1 c5"><span class="c4">Abstract</span></p><p class="c2 c1"><span></span></p><p class="c1 c5"><span>I propose to add to Go 1.2 a variant of the slice operation that allows reducing the capacity of a slice.</span></p><p class="c1 c2"><span></span></p><p class="c1 c5"><span>Fixes issue 1642. Discussion on the </span><span class="c10"><a class="c9" href="https://groups.google.com/d/msg/golang-dev/cL9CCxa2jUc/K-cAjmQ9NCUJ">mailing list</a></span><span>.</span></p><p class="c2 c1"><span></span></p><p class="c1"><span class="c4">Background</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>It would occasionally be useful, for example in custom []byte allocation managers, to be able to hand a slice to a caller and know that the caller cannot edit values beyond a given subrange of the true array.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The addition of append to the language made this somewhat more important, because append lets programmers overwrite entries between len and cap without realizing it or even mentioning cap.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Issue 1642 was filed for this by Roger Peppe after </span><span class="c10"><a class="c9" href="https://groups.google.com/forum/?fromgroups#!topic/golang-dev/21oFAu2eQNY">this discussion</a></span><span> in 2011.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The need does not come up often, but it does come up occasionally. The most important argument in favor is that giving programmers a way to control cap gives them more control over append.</span></p><hr style="page-break-before:always;display:none;"><p class="c3 c1"><span class="c4"></span></p><a href="go12slice.html#" name="id.8wvfl6yr9ine"></a><p class="c1"><span class="c4">Proposed Definition</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>For an array, pointer to array, or slice a, the primary expression</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>a[i : j : k]</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>constructs a slice. The result has indices starting at 0, length equal to j - i, and capacity equal to k - i. The evaluation panics if i ≤ j ≤ k ≤ cap(a) is not true.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>For convenience, the index i may be omitted: it defaults to zero. The other indices j and k are required. Once we have sufficient experience using this form we might choose appropriate defaults for them.</span></p><p class="c1 c3"><span></span></p><p class="c1"><span>(This definition is in addition to, not a replacement for, the current two-index slice syntax.)</span></p><p class="c3 c1"><span></span></p><p class="c1"><span class="c4">Implications</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>As mentioned above, the most important implication is that control over cap gives programmers control over append, especially when handing a slice to code in another package.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>A second implication is to remove the ability to test for aliasing of slices without the unsafe package. Specifically, it has been observed that the current implementation, in which capacity can never shrink, allows checking for aliasing of two slices x and y by testing the address of the final element: &amp;x[:cap(x)][cap(x)-1] == &amp;y[:cap(y)][cap(y)-1]. Being able to control the capacity breaks this test. However, in practice I do not believe this test is widely used. </span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The most important use for determining overlap is to decide how to run a copy, and the builtin function now handles that. The only code I can find anywhere (including public Go code) containing such a test is math/big’s func alias. Since math/big already uses assembly, it would be reasonable for it to use unsafe to do a real pointer comparison instead.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Also, math/big only uses this test on its own slices, which are not exposed directly to client code. So since math/big does not reduce the capacity of those slices, nothing does, so the test can stay as is.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>This test does not exactly roll off the tongue. I have vague memories of using the idiom when writing go/build or cmd/go, but the test was later removed entirely by someone else, in part because I had gotten the implementation wrong anyway.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>I don’t see a compelling argument that overlap testing is important enough to warrant language support beyond package unsafe. If that argument is made, we could consider it then.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span class="c4">Implementation</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The implementation of the language operation is trivial.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The new language operation would need to be made available in package reflect as well. reflect.Value defines:</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>        func (v Value) SetLen(len int)</span></p><p class="c1"><span>        func (v Value) Slice(low, high int) Value</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The API would probably be extended to define:</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>        func (v Value) SetCap(cap int)</span></p><p class="c1"><span>        func (v Value) Slice3(low, high, max int) Value</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>When defaults are decided, we can use gofmt -r to simplify existing expressions.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span class="c4">Defaults for j and k</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>There are a number of sensible possibilities for what the defaults for j and k should be. They are recorded here for discussion </span><span class="c6">later</span><span>, after we have real use cases against which we can evaluate them. </span><span class="c4 c6">We are not interested in discussing these now</span><span>.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>The examples assume x = make([]int, 10, 20).</span></p><p class="c1"><span>The comparison ≡ means the slices have the same base, len, and cap.</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 1: j defaults to len(x), k defaults to cap(x).</span></p><p class="c0"><span>x[i::] ≡ x[i:]</span></p><p class="c0"><span>x[i:j:] ≡ x[i:j]</span></p><p class="c0"><span>x[::] ≡ x</span></p><p class="c0"><span>x[::n] depends on n vs len</span></p><p class="c0"><span>x[::15] ≡ x[0:10:15]</span></p><p class="c0"><span>x[::5] panics (implicit j = 10 &gt; k = 5)</span></p><p class="c0"><span>x[0:15:] ≡ x[0:15]</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 2: j defaults to k, k defaults to cap(x)</span></p><p class="c1"><span>        x[i::] ≡ x[i:20]</span></p><p class="c1"><span>        x[i:j:] ≡ x[i:j]</span></p><p class="c1"><span>        x[::] ≡ x[:20]  // an idiom for growing a slice?</span></p><p class="c1"><span>        x[::n] ≡ x[0:n:n]</span></p><p class="c1"><span>        x[::15] ≡ x[0:15:15]</span></p><p class="c1"><span>        x[::5] ≡ x[0:5:5]</span></p><p class="c1"><span>        x[0:15:] ≡ x[0:15]</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 3: j defaults to min(len(x), k), k defaults to cap(x)</span></p><p class="c0"><span>x[i::] ≡ x[i:]</span></p><p class="c0"><span>x[i:j:] ≡ x[i:j]</span></p><p class="c0"><span>x[::] ≡ x</span></p><p class="c0"><span>x[::n] depends on n vs len</span></p><p class="c0"><span>x[::15] = x[0:10:15] // len stayed where it was</span></p><p class="c0"><span>x[::5] ≡ x[0:5:5] // len pulled down by new cap</span></p><p class="c0"><span>x[0:15:] ≡ x[0:15]</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 4: j defaults to len(x), k defaults to len(x)</span></p><p class="c1"><span>        x[i::] ≡ x[i:10:10], NOT same as x[i:]</span></p><p class="c1"><span>        x[i:j:] ≡ x[i:j:10], NOT same as x[i:j]</span></p><p class="c1"><span>        x[::] ≡ x[0:10:10]  // an idiom for shrinking a slice?</span></p><p class="c1"><span>        x[::15] ≡ x[0:10:15]</span></p><p class="c1"><span>        x[::5] panics (implicit j = 10 &gt; k = 5)</span></p><p class="c1"><span>        x[0:15:] panics (j = 15 &gt; implicit k = 10), NOT same as x[0:15]</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 5: j defaults to k, k defaults to len(x).</span></p><p class="c1"><span>        x[i::] ≡ x[i:10:10], NOT same as x[i:]</span></p><p class="c1"><span>        x[i:j:] ≡ x[i:j:10], NOT same as x[i:j]</span></p><p class="c1"><span>        x[::] ≡ x[:10:10]  // an idiom for shrinking a slice?</span></p><p class="c1"><span>        x[::15] ≡ x[0:15:15] // slice cap shrank, len grew</span></p><p class="c1"><span>        x[::5] ≡ x[0:5:5]</span></p><p class="c1"><span>        x[0:15:] panics (j = 15 &gt; implicit k = 10)</span></p><p class="c3 c1"><span></span></p><p class="c1"><span>Case 6: j defaults to min(len(x), k), k defaults to len(x).</span></p><p class="c1"><span>        x[i::] ≡ x[i:10:10], NOT same as x[i:]</span></p><p class="c1"><span>        x[i:j:] ≡ x[i:j:10], NOT same as x[i:j]</span></p><p class="c1"><span>        x[::] ≡ x[:10:10]  // an idiom for shrinking a slice?</span></p><p class="c1"><span>        x[::15] ≡ x[0:10:15]  // len stayed where it was</span></p><p class="c0"><span>x[::5] ≡ x[0:5:5]  // len pulled down by new cap</span></p><p class="c1"><span>        x[0:15:] panics (j = 15 &gt; implicit k = 10)<br></span></p><p class="c3 c1"><span></span></p><p class="c3 c1"><span></span></p></div><div id="footer"><span>Published by <a target="_blank" title="Learn more about Google Drive" href="https://docs.google.com/">Google Drive</a></span><span class="dash">&ndash;</span><a href="https://docs.google.com/abuse?id=1GKKdiGYAghXRxC2BFrSEbHBZZgAGKQ-yXK-hRKBo0Kk">Report Abuse</a><span class="dash">&ndash;</span><span>Updated automatically every 5 minutes</span></div><script type="text/javascript">
(function(){if(window.jstiming){window.jstiming.a={};window.jstiming.b=1;var e=function(b,a,d){var c=b.t[a],g=b.t.start;if(c&&(g||d))return c=b.t[a][0],void 0!=d?g=d:g=g[0],c-g},n=function(b,a,d){var c="";window.jstiming.srt&&(c+="&srt="+window.jstiming.srt,delete window.jstiming.srt);window.jstiming.pt&&(c+="&tbsrt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?c+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?c+="&tran="+window.gtbExternal.tran():
window.chrome&&window.chrome.csi&&(c+="&tran="+window.chrome.csi().tran)}catch(g){}var f=window.chrome;if(f&&(f=f.loadTimes)){f().wasFetchedViaSpdy&&(c+="&p=s");if(f().wasNpnNegotiated){var c=c+"&npn=1",k=f().npnNegotiatedProtocol;k&&(c+="&npnv="+(encodeURIComponent||escape)(k))}f().wasAlternateProtocolAvailable&&(c+="&apa=1")}var l=b.t,s=l.start,f=[],k=[],h;for(h in l)if("start"!=h&&0!=h.indexOf("_")){var m=l[h][1];m?l[m]&&k.push(h+"."+e(b,h,l[m][0])):s&&f.push(h+"."+e(b,h))}delete l.start;if(a)for(var p in a)c+=
"&"+p+"="+a[p];(a=d)||(a="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return[a,"?v=3","&s="+(window.jstiming.sn||"_s")+"&action=",b.name,k.length?"&it="+k.join(","):"",c,"&rt=",f.join(",")].join("")};window.jstiming.getReportUri=n;var q=function(b,a,d){b=n(b,a,d);if(!b)return"";a=new Image;var c=window.jstiming.b++;window.jstiming.a[c]=a;a.onload=a.onerror=function(){window.jstiming&&delete window.jstiming.a[c]};a.src=b;a=null;return b};window.jstiming.report=
function(b,a,d){if("prerender"==document.webkitVisibilityState){var c=!1,g=function(){if(!c){a?a.prerender="1":a={prerender:"1"};var f;"prerender"==document.webkitVisibilityState?f=!1:(q(b,a,d),f=!0);f&&(c=!0,document.removeEventListener("webkitvisibilitychange",g,!1))}};document.addEventListener("webkitvisibilitychange",g,!1);return""}return q(b,a,d)};window.jstiming.reportDone=function(b){if(window.jstiming.b<=(b||1))return!1;for(var a in window.jstiming.a)return!1;return!0};var r=function(b,a,
d,c){return 0<d?(c?b.tick(a,c,d):b.tick(a,"",d),!0):!1};window.jstiming.getNavTiming=function(b){if(window.performance&&window.performance.timing){var a=window.performance.timing;r(b,"_dns",a.domainLookupStart)&&r(b,"dns_",a.domainLookupEnd,"_dns");r(b,"_con",a.connectStart)&&r(b,"con_",a.connectEnd,"_con");r(b,"_req",a.requestStart)&&r(b,"req_",a.responseStart,"_req");r(b,"_rcv",a.responseStart)&&r(b,"rcv_",a.responseEnd,"_rcv");if(r(b,"_ns",a.navigationStart)){r(b,"ntsrt_",a.responseStart,"_ns");
r(b,"nsfs_",a.fetchStart,"_ns");var d=window.external&&window.external.startE;!d&&window.chrome&&window.chrome.csi&&(d=Math.floor(window.chrome.csi().startE));d&&(r(b,"_se",d),r(b,"sens_",a.navigationStart,"_se"));r(b,"ntplt0_",a.loadEventStart,"_ns");r(b,"ntplt1_",a.loadEventEnd,"_ns")}}}};})()
</script><script type="text/javascript">KX_timer.tick('tl'); if (document.location.protocol == 'https:') {window.jstiming.report(KX_timer, undefined , 'https://gg.google.com/csi');} else {window.jstiming.report(KX_timer);}</script></body></html>